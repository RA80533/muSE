<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>muSE: Modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">muSE
   &#160;<span id="projectnumber">r771</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Modules<div class="ingroups"><a class="el" href="group__FunctionalObjects.html">Functional objects</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A module is a value that contains a set of variable bindings you can refer to.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Modules:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__Modules.png" border="0" alt="" usemap="#group____Modules"/>
<map name="group____Modules" id="group____Modules">
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga12796d73fa2562690e101367c8239c4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Modules.html#ga12796d73fa2562690e101367c8239c4e">fn_module</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:ga12796d73fa2562690e101367c8239c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85915bb7656e73ca9a74af2c6a28e6c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Modules.html#ga85915bb7656e73ca9a74af2c6a28e6c8">module_find_symbol_with_value</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *obj, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> value)</td></tr>
<tr class="memdesc:ga85915bb7656e73ca9a74af2c6a28e6c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches this module's symbols for a symbol defined to the given value.  <a href="#ga85915bb7656e73ca9a74af2c6a28e6c8"></a><br/></td></tr>
<tr class="separator:ga85915bb7656e73ca9a74af2c6a28e6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf762ec21f9fa1cda7e23a346f5e568f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Modules.html#gaf762ec21f9fa1cda7e23a346f5e568f9">module_syntax</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, module_t *m, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:gaf762ec21f9fa1cda7e23a346f5e568f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12dc64fefde1a46a0f2fa022c7e3cd2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Modules.html#ga12dc64fefde1a46a0f2fa022c7e3cd2e">fn_require</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="memdesc:ga12dc64fefde1a46a0f2fa022c7e3cd2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">(require ModuleSymbol ...)  <a href="#ga12dc64fefde1a46a0f2fa022c7e3cd2e"></a><br/></td></tr>
<tr class="separator:ga12dc64fefde1a46a0f2fa022c7e3cd2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac86537bdb9f35d099934f35df9e6089d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Modules.html#gac86537bdb9f35d099934f35df9e6089d">fn_import</a> (<a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *env, void *context, <a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> args)</td></tr>
<tr class="separator:gac86537bdb9f35d099934f35df9e6089d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A module is a value that contains a set of variable bindings you can refer to. </p>
<p>You define a module using the <a class="el" href="group__Modules.html#ga12796d73fa2562690e101367c8239c4e">module</a> syntax which creates a module value. Symbols exported from a module are accessed using the long form notation</p>
<div class="fragment"><div class="line">ModuleName.exportSymbol </div>
</div><!-- fragment --><p>. If you want to use a module's exports just by their short names, you can import its definitions using <a class="el" href="group__Modules.html#gac86537bdb9f35d099934f35df9e6089d">import</a>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga12796d73fa2562690e101367c8239c4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> fn_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line">(module MyMod (exportA exportB ...) ...body... ) </div>
</div><!-- fragment --><p>Such a module expression introduces global symbols MyMod.exportA, MyMod.exportB, etc. with the appropriate bindings.</p>
<p>Within a module, you use the usual <a class="el" href="group__CellManipulation.html#ga6d9aaa441453c9f657c54c3ee7ad6e11">define</a> function to introduce definitions for whatever ie exported from the module. If you introduce definitions of other symbols, they will be visible only to the module block and will disappear from all scope when the module completes loading. Such local symbols' values can be usefully captured in closures however.</p>
<p>The <code>module</code> expression defines the value of the <code>MyMod</code> symbol to be a function of one argument. This function takes a symbol and evaluates to its value in the context of the module.</p>
<p>Another way to define a module is to place </p>
<div class="fragment"><div class="line">(module MyMod (exportA exportB ...)) </div>
</div><!-- fragment --><p> at the start of a module file. In this case, the rest of the file will be considered to be the module definition and will be read in. The advantage of this approach over the top approach is that using the top approach you cannot define macros for local use within the module. Whereas in the above approach you have all the facilities normally available via <a class="el" href="group__PortIO.html#ga9f055caa8cb431a24bb03d8fdb7e57c2">load</a>.</p>
<p>Modules are values. Therefore you are free to define functions that return modules, etc. Modules may export other modules as well, which can be accessed using the dot notation - for example: m1.m2.m3.val</p>
<p>Module exports are mutable. You can use the generic <a class="el" href="group__PropertyLists.html#gaa8d9415b42112e4d0f2b32641e054254">get</a> and <a class="el" href="group__PropertyLists.html#gae8cebc5dcf9e49f0dbced122adb8d7dd">put</a> functions to fetch and modify the exports of a module. You cannot, however, add new exports or remove exports from a module using "put". To add new exports or to change existing definitions (for example, to reload a module), you can evaluate </p>
<div class="fragment"><div class="line">(module M (newexport1 oldexport1 ...) ...) </div>
</div><!-- fragment --><p> If your module is defined in a file and you've edited it, you can use this property to redefine the module by simply callind </p>
<div class="fragment"><div class="line">(load <span class="stringliteral">&quot;mymodule.scm&quot;</span>) </div>
</div><!-- fragment --><p> to have your module's definition changes take effect. Note that this refresh mechanism cannot be used to <b>remove</b> module exports.</p>
<p>Right before the body of a module is evaluated, the new module object itself is made available in the "recent computations" list so that you can get at the "current module" object by evaluating the expression</p>
<div class="fragment"><div class="line">(the module) </div>
</div><!-- fragment --><p>. This holds even for anonymous modules.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">error:key-not-found</td><td>Handler format:<div class="fragment"><div class="line">(fn (resume <span class="stringliteral">&#39;error:key-not-found obj key) ...) </span></div>
</div><!-- fragment --> Raised when the given key cannot be found in the given module during a lookup. You can resume by resolving the intended value.</td></tr>
    <tr><td class="paramname">error:immutable-key</td><td>Handler format:<div class="fragment"><div class="line">(fn (resume <span class="stringliteral">&#39;error:immutable-key module key) ...) </span></div>
</div><!-- fragment --> Raised if the module doesn't export the given key. Only exported keys can be modified using put. You can resume with the intended result of the put operation.</td></tr>
    <tr><td class="paramname">error:invalid-module-name</td><td>Handler format:<div class="fragment"><div class="line">(fn (resume <span class="stringliteral">&#39;error:invalid-module-name name) ...) </span></div>
</div><!-- fragment --> Raised if this module definition is trying to augment an existing module, but the value of the given module name doesn't refer to a module and neither is it an undefined symbol. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="group__MuseAPI.html#ggab5b6d16681e25eaab89b93fad90b4727a1f9900717ca0e77e7b094a23939841d0">MUSE_CONS_CELL</a>, <a class="el" href="group__MuseAPI.html#ga758ac75e581c6ac32b06e61741fa22ca">muse_functional_object_data()</a>, <a class="el" href="group__MuseAPI.html#ga46ffbd092a8da85372d8d623f33ae47c">muse_mk_functional_object()</a>, <a class="el" href="group__MuseAPI.html#gga71b858b1a2cd474be8f987d0271f1890a691eefc496b45215c8ff94a59de008c3">MUSE_NIL</a>, <a class="el" href="group__MuseAPI.html#ga16eb6fecef6e1e55330539875ee5d40a">muse_raise_error()</a>, <a class="el" href="group__MuseAPI.html#ggab5b6d16681e25eaab89b93fad90b4727aac36b25578762b2a3304acfafa7a74bf">MUSE_SYMBOL_CELL</a>, and <a class="el" href="group__MuseAPI.html#ga1d1352c5be6d0fb55d15a89f242b40c4">muse_symbol_value()</a>.</p>

</div>
</div>
<a class="anchor" id="ga85915bb7656e73ca9a74af2c6a28e6c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> module_find_symbol_with_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches this module's symbols for a symbol defined to the given value. </p>
<p>If any of the module's symbols is itself is a module, then it recursively searches the sub modules. The returned value is a list that gives the path through the module hierarchy to the value. </p>

<p>References <a class="el" href="group__Modules.html#ga85915bb7656e73ca9a74af2c6a28e6c8">module_find_symbol_with_value()</a>, <a class="el" href="group__MuseAPI.html#ga758ac75e581c6ac32b06e61741fa22ca">muse_functional_object_data()</a>, and <a class="el" href="group__MuseAPI.html#gga71b858b1a2cd474be8f987d0271f1890a691eefc496b45215c8ff94a59de008c3">MUSE_NIL</a>.</p>

<p>Referenced by <a class="el" href="group__CoreLanguage.html#ga9c381cde5b3847666c95978df6d213f5">fn_symbol_whose_value_is()</a>, and <a class="el" href="group__Modules.html#ga85915bb7656e73ca9a74af2c6a28e6c8">module_find_symbol_with_value()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf762ec21f9fa1cda7e23a346f5e568f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> module_syntax </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">module_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line">(MyMod ...body...)</div>
</div><!-- fragment --><p>Behaves exactly like <code>do</code> under all circumstances, except that the symbols in the body part are interpreted in the context of the module.</p>
<p>When you use such an expression within a closure creating expression, the head is replaced with "do" since the body is already automatically bind-copied in the context of the module and there is no longer any necessity for the module object sitting at the head. So this function is called only when the module object is used outside of a closure capturing expression - i.e. either at the top level or inside any immediately evaluated expression at the top level. </p>

<p>References <a class="el" href="group__MuseAPI.html#ga6a75adf7f34c0b6517eba3e1875b9b52">muse_apply()</a>.</p>

</div>
</div>
<a class="anchor" id="ga12dc64fefde1a46a0f2fa022c7e3cd2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> fn_require </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(require ModuleSymbol ...) </p>
<p>Will first search the current directory for file named "ModuleSymbol.scm" and load that if found. The module is not "import"ed. If such a file doesn't exist, it will fetch and load "http://muvee-symbolic-expressions.googlecode.com/svn/trunk/lib/ModuleSymbol.scm"</p>
<p>Can raise fetch-uri and load related exceptions.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">error:invalid-module-reference</td><td>Handler format:<div class="fragment"><div class="line">(fn (<span class="stringliteral">&#39;error:invalid-module-reference given-ref) ...) </span></div>
</div><!-- fragment --> Raised when the module (if not loaded yet) could neither be resolved as a local file nor as a file on the library site. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="group__MuseAPI.html#ga91cff55083d294f1da92a8f82ad870d3">muse_generate_list()</a>.</p>

<p>Referenced by <a class="el" href="group__Modules.html#gac86537bdb9f35d099934f35df9e6089d">fn_import()</a>.</p>

</div>
</div>
<a class="anchor" id="gac86537bdb9f35d099934f35df9e6089d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a> fn_import </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga93436fada5a32eee71ac3391b225a0d2">muse_env</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MuseAPI.html#ga965ab909826d7eb8043c4cac792555ec">muse_cell</a>&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line">(<span class="keyword">import</span> ModA ModB ...) </div>
</div><!-- fragment --><p>Introduces symbols in all the named modules into the current context, in their short forms. Useful in two places -</p>
<ul>
<li>Inside a module definition to make the short form of symbols from aother module available for the scope of the module being defined.</li>
<li>To globally introduce short form names of the symbols in the given modules, when used at the REPL or file level. </li>
</ul>

<p>References <a class="el" href="group__Modules.html#ga12dc64fefde1a46a0f2fa022c7e3cd2e">fn_require()</a>, <a class="el" href="group__MuseAPI.html#gaf4509f4d0b6b34c923ec1aa1aeda019e">muse_eval_list()</a>, and <a class="el" href="group__MuseAPI.html#gga71b858b1a2cd474be8f987d0271f1890a691eefc496b45215c8ff94a59de008c3">MUSE_NIL</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 11 2013 12:05:34 for muSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
